function showNote(e){Array.from(document.getElementsByClassName(e+"_text")).forEach(e=>{"none"===e.style.display?(e.style.display="block",document.getElementById("notes_bg").style.display="block"):(e.style.display="none",document.getElementById("notes_bg").style.display="none")})}function closeNote(){Array.from(document.getElementsByClassName("notes_close")).forEach(e=>{e.style.display="none"})}function resize(){positionZoom(),renderInfoPage()}window.onresize=resize;const appHeight=()=>{document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)};window.addEventListener("resize",appHeight),appHeight();var root=document.querySelector(":root"),root_var=getComputedStyle(root),get_gap=root_var.getPropertyValue("--gap");backPage=sessionStorage.getItem("backPage");var lastPage,wordsPage,posSpan,cntWidth,pageTot,pageCur,pagina=$("#item_paginas"),pgwidth=pagina.width(),gap=parseInt(get_gap),areaWidth=pgwidth,columnWidth=pgwidth-gap,animDuration=400,contentPos=null;function positionZoom(){elmSpan=$("#inner").append("<span></span>"),pageTot=Math.ceil((cntWidth=(posSpan=Math.floor($("#inner").find("span:last-of-type").position().left))+(areaWidth+gap))/(areaWidth+gap))}function getPositionDom(){$("#content").offset(),parseInt($("#content").css("left"),10)}function renderInfoPage(){$("#infopage").html(pageCur+"  <span>/</span>  "+pageTot)}function hasContentAnimateQueue(){return 0!==$("#content").queue().length}function next(){if(pageTot>0&&pageCur<pageTot){if(!hasContentAnimateQueue()){var e=$("#content"),t=contentPos-areaWidth-gap;contentPos=t,e.animate({left:t+"px"},animDuration),pageCur++,renderInfoPage()}}else 23!=chapter_page&&"on"!=wordsPage&&(next_chapter_page=chapter_page+1,window.location.href="./chapter_"+next_chapter_page+".html")}function prev(){if(pageCur>1){if(!hasContentAnimateQueue()){if(backPage>=50){var e,t=$("#content");contentPos=e=lastPage+pgwidth+gap,t.animate({left:e+"px"},animDuration),pageCur--,renderInfoPage(),sessionStorage.setItem("backPage",10),backPage=sessionStorage.getItem("backPage")}else t=$("#content"),contentPos=e=contentPos+areaWidth+gap,t.animate({left:e+"px"},animDuration),pageCur--,renderInfoPage()}}else 1!=chapter_page&&(sessionStorage.setItem("backPage",100),prev_chapter_page=chapter_page-1,window.location.href="./chapter_"+prev_chapter_page+".html")}function start(){var e=document.getElementById("prev");e.addEventListener("click",prev),(e=document.getElementById("next")).addEventListener("click",next);var t=document.getElementById("inner");t.addEventListener("swiped-left",prev),t.addEventListener("swiped-right",prev),$("#inner").append("<span></span>");var n=Math.floor($("#inner").find("span:last-of-type").position().left);if(n+=columnWidth,pos=parseInt($("#inner").css("-webkit-column-gap"),10),n-=gap,$("#inner").find("span:last-of-type").remove(),pageTot=(cntWidth=n)/(areaWidth+gap)<=1?1:Math.ceil(cntWidth/(areaWidth+gap)),backPage<=50)pageCur=1;else if(backPage>=50){var a=$("#content");lastPage=-pgwidth*(ajustPages=pageTot-1)-gap*ajustPages,a.css({left:lastPage+"px"}),newPos=lastPage,pageCur=pageTot,sessionStorage.setItem("backPage",10)}getPositionDom(),renderInfoPage()}start();